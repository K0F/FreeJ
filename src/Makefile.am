INCLUDES = @FREEJ_STATIC_INCLUDES@

#-freg-struct-return is to compile an host compatible with freeframe dso
AM_CXXFLAGS = @SDL_CFLAGS@ @FT2_CFLAGS@ @FC_CFLAGS@ @XIPH_CFLAGS@ @UNICAP_CFLAGS@ @FFMPEG_CFLAGS@ @MOZJS_CFLAGS@ \
	      -freg-struct-return \
              -DPREFIX="\"$(prefix)\"" -DDATADIR="\"$(datadir)\""

SUBDIRS = include


SOURCES = \
	context.cpp	\
	layer.cpp	\
	fps.cpp		\
	blitter.cpp	\
	sdl_blits.cpp   \
	linear_blits.cpp \
	iterator.cpp	\
	linklist.cpp	\
	jsync.cpp	\
	closure.cpp     \
	callback.cpp    \
	console.cpp	\
	cpu_accel.cpp	\
	plugin.cpp	\
	plugger.cpp	\
	frei0r.cpp	\
	freeframe.cpp   \
	filter.cpp	\
	parameter.cpp   \
	jutils.cpp	\
	fastmemcpy.cpp  \
	ringbuffer.cpp  \
	convertvid.cpp  \
\
	v4l_layer.cpp tvfreq.c	\
	unicap_layer.cpp \
	video_layer.cpp	\
	image_layer.cpp \
	text_layer.cpp \
	gen_f0r_layer.cpp \
	geo_layer.cpp	\
	flash_layer.cpp \
	xhacks_layer.cpp \
        goom_layer.cpp \
	impl_layers.cpp \
\
	screen.cpp	\
	sdl_screen.cpp 	\
	sdlgl_screen.cpp \
	gl_screen.cpp   \
	soft_screen.cpp \
\
	controller.cpp  \
	console_ctrl.cpp \
	console_calls_ctrl.cpp \
	console_keys_ctrl.cpp \
	console_widgets_ctrl.cpp \
	kbd_ctrl.cpp	\
	mouse_ctrl.cpp	\
	vimo_ctrl.cpp	\
	joy_ctrl.cpp	\
	midi_ctrl.cpp   \
	trigger_ctrl.cpp \
	osc_ctrl.cpp \
	wiimote_ctrl.cpp \
\
	audio_jack.cpp  \
	audio_collector.cpp \
\
	video_encoder.cpp \
	ffmpeg_encoder.cpp \
	theorautils.cpp \
	oggtheora_encoder.cpp \
	impl_video_encoders.cpp \
	xgrab_layer.cpp

JS_SOURCES = 	context_js.cpp  \
		layer_js.cpp    \
		filter_js.cpp   \
		jsparser.cpp	\
		callbacks_js.cpp \
		video_encoder_js.cpp \
		v4l_layer_js.cpp \
		unicap_layer_js.cpp \
		video_layer_js.cpp \
		image_layer_js.cpp \
		text_layer_js.cpp \
		geo_layer_js.cpp \
		flash_layer_js.cpp \
		goom_layer_js.cpp \
		audio_collector_js.cpp


static_libs = @FREEJ_STATIC_LIBS@

shared_libs = -ldl -lpthread -lm -lslang -lpng -ljpeg -lrt \
	         @X11_LIBS@     \
		 @XIPH_LIBS@    \
		 @MOZJS_LIBS@   \
		 @OPENGL_LIB@   \
		 @SDL_LIBS@     \
		 @FLASH_LIBS@   \
		 @FT2_LIBS@     \
		 @FC_LIBS@      \
                 @ALSA_LIBS@    \
		 @JACK_LIBS@    \
		 @GOOM_LIBS@    \
                 @FFTW_LIBS@    \
		 @FFMPEG_LIBS@  \
		 @SWSCALE_LIBS@ \
		 @X11_LIBS@     \
		 @BLUEZ_LIBS@   \
		 @CWIID_LIBS@   \
		 @OPENGL_LIB@   \
		 @UNICAP_LIBS@


lib_LTLIBRARIES = libfreej.la
libfreej_la_SOURCES = $(SOURCES) $(JS_SOURCES)
libfreej_la_LIBADD  = $(static_libs) $(shared_libs)
libfreej_la_LDFLAGS = -version-info @FREEJ_VERSION_INFO@

bin_PROGRAMS = freej
freej_SOURCES = freej.cpp
freej_LDADD = -L$(top_builddir)/src/.libs -lfreej


